---
title: "Appendix"
author: "Mike"
date: "`r Sys.Date()`"
output: html_document
---

# Appendix

```{r}
# to see non-scientific notation a result
format(12e-17, scientific = FALSE)
```


## Short-cut
These are shortcuts that you probably you remember when working with R. Even though it might take a bit of time to learn and use them as your second nature, but they will save you a lot of time.\
Just like learning another language, the more you speak and practice it, the more comfortable you are speaking it. \

function|short-cut
---|---
navigate folders in console|`" " + tab`
pull up short-cut cheat sheet | `ctrl + shift + k`
go to file/function\ (everything in your project) | `ctrl + .`
search everything | `cmd + shift + f`
navigate between tabs | `Crtl + shift + .`
type function faster | `snip + shift + tab`
type faster | `use tab for fuzzy match`
| `cmd + up`
|`ctrl + .`


<br>
Sometimes you can't stage a folder because it's too large. In such case, use `Terminal` pane in Rstudio then type `git add -A` to stage all changes then commit and push like usual.


## Function short-cut
apply one function to your data to create a new variable:
`mutate(mod=map(data,function))`\
instead of using `i in 1:length(object)`:
`for (i in seq_along(object))`\
apply multiple function:
`map_dbl`\
apply multiple function to multiple variables:`map2`  
`autoplot(data)`  plot times series data  
`mod_tidy = linear(reg) %>% set_engine('lm') %>% fit(price ~ ., data=data)` fit lm model. It could also fit other models (stan, spark, glmnet, keras)  


 * Sometimes, data-masking will not be able to recognize whether you're calling from environment or data variables. To bypass this, we use `.data$variable` or `.env$variable`. For example `data %>% mutate(x=.env$variable/.data$variable`  
 * Problems with data-masking:  
        + Unexpected masking by data-var: Use `.data` and `.env` to disambiguate  
        + Data-var cant get through:  
            + Tunnel data-var with {{}}
            + Subset `.data` with [[]]
 * Passing Data-variables through arguments
 
```{r eval=FALSE}
library("dplyr")
mean_by <- function(data,by,var){
    data %>%
        group_by({{{by}}}) %>%
        summarise("{{var}}":=mean({{var}})) # new name for each var will be created by tunnel data-var inside strings
}

mean_by <- function(data,by,var){
    data %>%
        group_by({{{by}}}) %>%
        summarise("{var}":=mean({{var}})) # use single {} to glue the string, but hard to reuse code in functions
}
```
 * Trouble with selection:  
```{r eval=FALSE}
library("purrr")
name <- c("mass","height")
starwars %>% select(name) # Data-var. Here you are referring to variable named "name"

starwars %>% select(all_of((name))) # use all_of() to disambiguate when 

averages <- function(data,vars){ # take character vectors with all_of()
    data %>%
        select(all_of(vars)) %>%
        map_dbl(mean,na.rm=TRUE)
} 

x = c("Sepal.Length","Petal.Length")
iris %>% averages(x)


# Another way
averages <- function(data,vars){ # Tunnel selectiosn with {{}}
    data %>%
        select({{vars}}) %>%
        map_dbl(mean,na.rm=TRUE)
} 

x = c("Sepal.Length","Petal.Length")
iris %>% averages(x)
```
 

## Citation

include a citation by `[@Farjam_2015]`  

cite packages used in this session

`package=ls(sessionInfo()$loadedOnly) for (i in package){print(toBibtex(citation(i)))}`
```{r, eval=FALSE}
package=ls(sessionInfo()$loadedOnly) 
for (i in package){
    print(toBibtex(citation(i)))
    }
```




